# Supervisor configuration for managing Laravel services
#
# Requirements:
# - Run PHP-FPM for handling PHP requests
# - Run Nginx for serving HTTP requests
# - Manage both processes in single container
# - Handle process failures and restarts
#
# Flow:
# - Supervisor starts -> Launches PHP-FPM and Nginx
# - Monitors both processes -> Restarts if they fail

[supervisord]
nodaemon=true
user=root
logfile=/var/log/supervisor/supervisord.log
pidfile=/var/run/supervisord.pid

[program:php-fpm]
command=php-fpm
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stderr
stderr_logfile_maxbytes=0
autorestart=true
startretries=3

[program:nginx]
command=nginx -g 'daemon off;'
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stderr
stderr_logfile_maxbytes=0
autorestart=true
startretries=3